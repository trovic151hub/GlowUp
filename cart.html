<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Skincare Shop | Cart & Checkout</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
  <script src="https://js.paystack.co/v1/inline.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.13.0/gsap.min.js"></script>
  <style>
    * {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    }

    @import url('https://fonts.googleapis.com/css2?family=Lora:wght@700&family=Montserrat:wght@500&display=swap');
    
    @media (max-width: 768px) {
      #cartContainer {
        flex-direction: column;
      }

      #checkout-step>div.grid {
        grid-template-columns: 1fr !important;
        /* single column mobile */
      }

      /* #cart-items>div {
        flex-direction: column;
        align-items: flex-start;
      } */

      #cart-items img {
        width: 30%;
        /* height: 30%; */
      }

      #order-summary,
      #shipping-summary-card,
      #payment-summary-card {
        width: 100%;
        margin-top: 1rem;
      }
    }
  </style>
</head>

<body class="bg-gray-50 text-gray-900">
  <!-- PLACE AT TOP OF BODY -->
  <div id="cartLoader"
    class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-30 backdrop-blur-sm z-50">
    <!-- <i class="fas fa-shopping-cart text-white text-5xl animate-pulse"></i> -->
    <svg xmlns="http://www.w3.org/2000/svg" class="fas fa-shopping-cart text-white w-12 h-12 animate-pulse"
      viewBox="0 0 16 16">
      <path fill="currentColor"
        d="M0 
    2.5A.5.5 0 0 1 .5 2H2a.5.5 0 0 1 .485.379L2.89 4H14.5a.5.5 0 0 1 .485.621l-1.5 6A.5.5 0 0 1 13 11H4a.5.5 0 0 1-.485-.379L1.61 
    3H.5a.5.5 0 0 1-.5-.5M3.14 5l.5 2H5V5zM6 5v2h2V5zm3 0v2h2V5zm3 0v2h1.36l.5-2zm1.11 3H12v2h.61zM11 8H9v2h2zM8 8H6v2h2zM5 8H3.89l.5 2H5zm0 
    5a1 1 0 1 0 0 2a1 1 0 0 0 0-2m-2 1a2 2 0 1 1 4 0a2 2 0 0 1-4 0m9-1a1 1 0 1 0 0 2a1 1 0 0 0 0-2m-2 1a2 2 0 1 1 4 0a2 2 0 0 1-4 0" />
    </svg>
  </div>

  <!-- Notification Container -->
  <div id="notification-container" class="fixed top-4 right-4 z-50 flex flex-col gap-2"></div>

  <header
    class="bg-gradient-to-r from-[#fbcfe8] to-[#f9a8d4] fixed top-0 w-full p-4 shadow-md flex justify-between items-center z-50">
    <button onclick="history.back()">
      <h1 class="text-xl font-bold">ðŸ›’ My Cart</h1>
    </button>
    </button>
  </header>

  <!-- Breadcrumb -->
  <nav class="bg-white h-20 flex items-center justify-center text-sm text-gray-500 gap-2 mt-16">
    <span id="bc-guestCarts" class="cursor-pointer">Shopping Cart</span>
    <i class="fas fa-chevron-right text-xs"></i>
    <span id="bc-checkout" class="cursor-pointer">Secure Checkout</span>
    <i class="fas fa-chevron-right text-xs"></i>
    <span id="bc-complete" class="cursor-pointer">Order Complete</span>
  </nav>

  <!-- Main Cart Wrapper -->
  <main class="max-w-6xl mx-auto p-4 flex md:gap-6" id="cartContainer">

    <!-- Products List -->
    <div class="flex-1 space-y-4">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-2xl font-bold">Shopping Cart</h2>
      </div>
      <div id="cart-items" class="space-y-4">
        <!-- JS will populate cart items here -->
      </div>
    </div>

    <!-- Order Summary -->
    <div class="w-full md:w-1/3 bg-white p-6 rounded-lg mt-8 shadow space-y-4 h-fit">
      <h3 class="text-lg font-bold border-b pb-5">Order summary</h3>
      <div class="flex justify-between py-2">
        <span>Cart Subtotal</span>
        <span id="cart-subtotal-checkout">â‚¦0.00</span>
      </div>
      <div class="flex justify-between text-lg font-bold border-t pt-5">
        <span>Estimated total</span>
        <span class="text-lg font-semibold" id="cart-subtotal-main">â‚¦0.00</span>
      </div>
      <button id="checkout-btn"
        class="w-full bg-pink-600 text-white py-2 rounded hover:bg-pink-700 transition">Checkout</button>
      <button id="goPageBtn" class="w-full border border-gray-400 text-pink-600 py-2 rounded transition">Continue
        shopping</button>
    </div>

  </main>

  <!-- Checkout Step -->
  <section id="checkout-step" class="hidden max-w-6xl mx-auto p-4">
    <div class="grid md:grid-cols-3 gap-6">

      <!-- Left Column: Shipping Form -->
      <div class="bg-white p-6 rounded shadow md:col-span-2">

        <!-- Header -->
        <div class="flex justify-between items-center mb-6 border-b pb-3">
          <h3 class="font-bold text-lg">Shipping Address</h3>
          <button id="shipping-edit-btn"
            class="hidden text-sm border font-medium border-gray-400 px-3 py-1 rounded text-gray-700 hover:bg-gray-100">Edit</button>
        </div>

        <!-- Shipping Form -->
        <div id="address-form">
          <!-- Email -->
          <div class="my-2">
            <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email Address <span
                class="text-red-500">*</span></label>
            <input id="email" type="email" placeholder="Email Address"
              class="w-full h-[52px] p-3 rounded-lg bg-gray-100 focus:outline-none" />
          </div>

          <!-- Name -->
          <div class="grid grid-cols-2 gap-3 my-2">
            <div>
              <label for="first-name" class="block text-sm font-medium text-gray-700 mb-1">First Name <span
                  class="text-red-500">*</span></label>
              <input id="first-name" placeholder="First Name"
                class="w-full h-[52px] p-3 rounded-lg bg-gray-100 focus:outline-none" />
            </div>
            <div>
              <label for="last-name" class="block text-sm font-medium text-gray-700 mb-1">Last Name <span
                  class="text-red-500">*</span></label>
              <input id="last-name" placeholder="Last Name"
                class="w-full h-[52px] p-3 rounded-lg bg-gray-100 focus:outline-none" />
            </div>
          </div>

          <!-- Street Address -->
          <div class="my-2">
            <label for="street" class="block text-sm font-medium text-gray-700 mb-1">Street Address <span
                class="text-red-500">*</span></label>
            <input id="street" placeholder="Street Address"
              class="w-full h-[52px] p-3 rounded-lg bg-gray-100 focus:outline-none" />
          </div>

          <!-- Country & State -->
          <div class="grid grid-cols-2 gap-3 my-2">
            <!-- Country -->
            <div>
              <label for="country" class="block text-sm font-medium text-gray-700 mb-1">
                Country <span class="text-red-500">*</span>
              </label>
              <input list="country-list" id="country" placeholder="Type country..."
                class="w-full h-[52px] p-3 rounded-lg bg-gray-100 focus:outline-none" />
              <datalist id="country-list">
                <option value="Loading countries..."></option>
              </datalist>
            </div>

            <!-- State -->
            <div>
              <label for="state" class="block text-sm font-medium text-gray-700 mb-1">
                State / Province <span class="text-red-500">*</span>
              </label>
              <input list="state-list" id="state" placeholder="Type state..."
                class="w-full h-[52px] p-3 rounded-lg bg-gray-100 focus:outline-none" />
              <datalist id="state-list">
                <option value="Select country first"></option>
              </datalist>
            </div>
          </div>

          <!-- LGA (Hidden by default) -->
          <div id="lga-wrapper" class="my-2 hidden">
            <label for="lga" class="block text-sm font-medium text-gray-700 mb-1">
              LGA <span class="text-red-500">*</span>
            </label>
            <select id="lga" class="w-full h-[52px] p-3 rounded-lg bg-gray-100 focus:outline-none">
              <option value="">Select LGA</option>
            </select>
          </div>

          <!-- Phone -->
          <div class="flex flex-col sm:flex-row gap-3 my-3">

            <div class="w-full sm:w-1/4">
              <label for="area-code" class="block text-sm font-medium text-gray-700 mb-1">
                Area Code <span class="text-red-500">*</span>
              </label>
              <input id="area-code" value="" placeholder="+234"
                class="w-full h-[52px] p-3 rounded-lg bg-gray-100 focus:outline-none" readonly />
            </div>

            <div class="flex-1 w-full">
              <label for="phone" class="block text-sm font-medium text-gray-700 mb-1">
                Phone Number <span class="text-red-500">*</span>
              </label>
              <input id="phone" placeholder="Phone Number"
                class="w-full h-[52px] p-3 rounded-lg bg-gray-100 focus:outline-none" />
            </div>

          </div>

          <!-- Delivery Options -->
          <div id="delivery-options" class="mt-6 border-t pt-4 hidden">

            <!-- Delivery Company -->
            <div class="my-2">
              <label class="block text-sm font-medium text-gray-700 mb-1">
                Delivery Company <span class="text-red-500">*</span>
              </label>
              <select id="delivery-company" class="w-full h-[52px] p-3 rounded-lg bg-gray-100 focus:outline-none">
                <option value="">Select Delivery Company</option>
                <option value="GIG">GIG Logistics</option>
                <option value="GUO">GUO Transport</option>
              </select>
            </div>

            <!-- Delivery Type -->
            <div class="my-2">
              <label class="block text-sm font-medium text-gray-700 mb-1">
                Delivery Type <span class="text-red-500">*</span>
              </label>
              <select id="delivery-type" class="w-full h-[52px] p-3 rounded-lg bg-gray-100 focus:outline-none">
                <option value="">Select Delivery Type</option>
                <option value="home">Home Delivery</option>
                <option value="terminal">Terminal Pickup</option>
              </select>
            </div>

            <!-- Terminal Select -->
            <div id="terminal-wrapper" class="my-2 hidden">
              <label class="block text-sm font-medium text-gray-700 mb-1">
                Select Terminal <span class="text-red-500">*</span>
              </label>
              <select id="terminal" class="w-full h-[52px] p-3 rounded-lg bg-gray-100 focus:outline-none">
                <option value="">Select Terminal</option>
              </select>
            </div>
          </div>

          <button id="place-order"
            class="mt-6 w-full max-w-md mx-auto flex justify-center bg-pink-500 text-white py-3 rounded-full transition">
            Continue
          </button>
        </div>

        <!-- Shipping Summary -->
        <div id="shipping-summary-card"
          class="hidden border-pink-400 bg-pink-50 border rounded-lg p-4 shadow relative mt-6">
          <span id="shipping-edit-btn"
            class="absolute top-2 right-2 text-sm text-blue-600 cursor-pointer hidden">Edit</span>
          <h4 class="font-semibold mb-2">Shipping Address</h4>
          <p><strong>Contact:</strong> <span id="sum-email"></span></p>
          <p><strong>Name:</strong> <span id="sum-name"></span></p>
          <p><strong>Phone:</strong> <span id="sum-phone"></span></p>
          <p><strong>Ship to:</strong> <span id="sum-address"></span></p>
        </div>

        <!-- Shipment Summary -->
        <div id="shipment-summary-card" class="hidden bg-white border rounded-lg p-4 shadow mt-4">
          <h4 class="font-semibold mb-2 border-b pb-5">Shipment Method</h4>
          <div id="sum-shipment" class="p-4 mt-4 mb-2 rounded-lg border-pink-400 bg-pink-50 border"></div>
        </div>

        <!-- Payment Summary -->
        <div id="payment-summary-card" class="hidden bg-white border rounded-lg p-4 shadow mt-4">
          <h4 class="font-semibold mb-2 border-b pb-2">Payment Method</h4>
          <div id="paystack-option" class="px-4 py-3 mt-2 rounded-lg border cursor-pointer hover:bg-pink-50">
            <div class="flex justify-between items-center">
              <span class="p-2 bg-white border border-gray-100 rounded">
                <img class="w-20 h-6"
                  src="https://cdn.brandfetch.io/idM5mrwtDs/theme/dark/logo.svg?c=1bxid64Mup7aczewSAYMX&t=1667559828449"
                  alt="Paystack">
              </span>
              <div class="flex justify-between gap-3 items-center">
                <i class="fas fa-credit-card text-gray-900"></i>
                <i class="check-icon hidden fas fa-check-circle text-pink-600 text-lg"></i>
              </div>
            </div>
          </div>

          <div id="WhatsApp" class="p-4 mt-2 rounded-lg border cursor-pointer hover:bg-pink-50">
            <div class="flex justify-between items-center">
              <span class="p-2 bg-white border border-gray-100 rounded">
                <i class="fab fa-whatsapp text-green-800"></i> WhatsApp
              </span>
              <div class="flex justify-between gap-3 items-center">
                <i class="fas fa-credit-card text-gray-900"></i>
                <i class="check-icon hidden fas fa-check-circle text-pink-600 text-lg"></i>
              </div>
            </div>
          </div>
        </div>

      </div>

      <!-- Right Column: Order Summary -->
      <div class="bg-white p-4 rounded shadow max-h-[700px] overflow-auto space-y-4">
        <h3 class="font-bold text-lg border-b pb-5">My Order</h3>
        <div id="summary-items" class="space-y-3">
          <!-- JS will populate items here -->
        </div>
        <div class="border-t pt-2 space-y-2 text-sm">
          <div class="flex justify-between">
            <span>Cart Subtotal</span>
            <span id="summary-subtotal">â‚¦0</span>
          </div>
          <div class="flex justify-between">
            <span>Shipping</span>
            <span id="summary-shipping">â‚¦0</span>
          </div>
        </div>
        <div class="border-t pt-3 flex justify-between font-bold text-lg">
          <span>Total</span>
          <span id="summary-total">â‚¦0</span>
        </div>
        <button id="summary-place-order" class="mt-4 w-full bg-gray-400 text-white text-lg font-bold py-3 rounded-lg">
          PLACE ORDER
        </button>
      </div>

    </div>
  </section>

  <!-- Complete Step -->
  <section id="complete-step" class="hidden text-center min-h-[70vh] flex flex-col justify-center items-center px-4">
    <h2 class="text-2xl font-bold">ðŸŽ‰ Order Successful</h2>
    <p class="text-gray-500 mt-2">Thank you for your purchase</p>
  </section>

  <!-- Footer -->
  <footer class="bg-pink-100 text-gray-800 relative">
    <div class="mx-6 md:mx-10 px-4 md:px-6 py-8 md:py-12 flex flex-col md:flex-row justify-between gap-8 md:gap-40">

      <!-- Contact Info -->
      <div class="flex-1 border-b md:border-b-0 pb-4 md:pb-0 border-gray-300">
        <h4 class="text-lg font-semibold mb-4">CONTACT US</h4>
        <p class="mb-2 flex items-center gap-2">
          <i class="fas fa-phone-alt"></i> +2347053380773
        </p>
        <p class="flex items-start gap-2">
          <i class="fas fa-map-marker-alt mt-1"></i>
          Lagos, Nigeria
        </p>
      </div>

      <!-- Newsletter -->
      <div class="flex-1">
        <h4 class="text-lg font-semibold mb-3">SIGN UP FOR DISCOUNTS & UPDATES</h4>
        <div class="block flex-col md:flex-row gap-2 md:gap-4 items-start md:items-center">
          <input type="text" placeholder="Enter your phone number or email address"
            class="w-full md:w-[100%] px-4 py-2 rounded border border-gray-300 focus:outline-none">
          <button class="mt-3 bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">
            Subscribe
          </button>
        </div>
      </div>
    </div>

    <!-- Powered By -->
    <div class="btn text-left text-sm text-white mx-6 md:mx-10 px-4 md:px-6 py-4 border-t border-gray-300">
      <button class="text-left block p-4 bg-pink-500">
        POWERED BY VTec
      </button>
    </div>

    <!-- WhatsApp Button -->
    <button id="openWhatsappModal" class="fixed bottom-6 right-6 z-50">
      <div class="relative w-14 h-14">
        <!-- Ripple circles -->
        <span class="absolute inset-0 rounded-full bg-green-400 opacity-50 animate-ping"></span>
        <span class="absolute inset-0 rounded-full bg-green-400 opacity-50 animate-ping delay-200"></span>
        <span class="absolute inset-0 rounded-full bg-green-400 opacity-50 animate-ping delay-400"></span>

        <!-- Main Button -->
        <div
          class="relative w-14 h-14 rounded-full bg-green-500 hover:bg-green-600 text-white flex items-center justify-center shadow-lg text-2xl">
          <i class="fab fa-whatsapp"></i>
        </div>
      </div>
    </button>

    <!-- WhatsApp Button -->
    <a href="https://wa.me/2349053380773" target="_blank" class="fixed bottom-6 right-6 z-50">
      <div class="relative w-14 h-14">
        <!-- Ripple circles -->
        <span class="absolute inset-0 rounded-full bg-green-400 opacity-50 animate-ping"></span>
        <span class="absolute inset-0 rounded-full bg-green-400 opacity-50 animate-ping delay-200"></span>
        <span class="absolute inset-0 rounded-full bg-green-400 opacity-50 animate-ping delay-400"></span>

        <!-- Main Button -->
        <div
          class="relative w-14 h-14 rounded-full bg-green-500 hover:bg-green-600 text-white flex items-center justify-center shadow-lg text-2xl">
          <i class="fab fa-whatsapp"></i>
        </div>
      </div>
    </a>
  </footer>
  <script src="cart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/tom-select/dist/js/tom-select.complete.min.js"></script>
</body>

</html>